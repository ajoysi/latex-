<!-- TOC -->autoauto- [1. 平台概述](#1-平台概述)auto    - [1.1. SmartCMP主要功能模块概述](#11-smartcmp主要功能模块概述)auto- [2. 快速上手](#2-快速上手)auto    - [2.1. 登陆系统](#21-登陆系统)auto    - [2.2. 申请服务](#22-申请服务)auto    - [2.3. 自助运维](#23-自助运维)auto        - [2.3.1. 查看服务部署详情和自助运维](#231-查看服务部署详情和自助运维)auto        - [2.3.2. 查看云主机详情和自助运维](#232-查看云主机详情和自助运维)auto        - [2.3.3. 查看云资源详情](#233-查看云资源详情)auto        - [2.3.4. 资源状态图](#234-资源状态图)auto        - [2.3.5. 资源回收](#235-资源回收)auto- [3. 首页](#3-首页)auto    - [3.1. 导航栏](#31-导航栏)auto    - [3.2. 通知](#32-通知)auto    - [3.3. 操作历史](#33-操作历史)auto    - [3.4. 仪表盘](#34-仪表盘)auto- [4. 服务申请](#4-服务申请)auto        - [4.0.1. 向导式申请](#401-向导式申请)auto            - [4.0.1.1. vSphere向导式申请](#4011-vsphere向导式申请)auto        - [4.0.2. 服务目录申请](#402-服务目录申请)auto        - [4.0.3. 重新申请部署](#403-重新申请部署)auto    - [4.1. 工单服务场景](#41-工单服务场景)auto    - [4.2. 工单的申请](#42-工单的申请)autoauto<!-- /TOC -->



# 1. 平台概述

SmartCMP 智能云管理平台，致力于解决企业多云应用管理问题。为应用提供可视化建模，通过一次建模，即可实现一键多平台自动部署和应用的全生命周期管理。让企业能够轻松部署和管理跨公有云、私有云的重要商业应用，帮助企业更好地使用云来加速业务创新。

SmartCMP 涵盖混合云管理（公有云、私有云、虚拟化环境、容器及物理机）自动化应用部署、自服务IT和持续交付。
新增了IT工单服务的新功能，提供对非标准化资源申请、需要IT人工介入的服务定义、发布、申请、审批以及处理完成的生命周期管理。

**SmartCMP 主要包括如下功能：**
>1.一个控制台实现对多种异构云环境的统一纳管，将计算、存储和网络等资源池化，形成新的虚拟数据中心，分配到不同的组织单位。

>2.统一的用户管理，分权分角色，将用户划分为具有独立目录、资源配额和合规性要求的组织。

>3.利用对应用程序的可视化建模技术，一次性创建基于TOSCA标准的应用蓝图，实现对应用程序的一键多平台自动和批量部署，及多应用在多平台的统一管理。

>4.服务目录自助式申请，内置的审批引擎，与可视化的部署拓扑。基于性能监控的报警，并可基于策略自动响应。丰富的自助运维操作，与完整的资源回收机制，形成了多云应用的全生命周期管理。

>5.丰富的资源申请趋势与利用率统计与展示。多种资源计费类型和计费规则的灵活组合，形成不同的计费策略。

>6.开放的架构，完美的本地IT生态系统支持与对接，包括统一认证平台（SSO）、审批流程系统、监控系统等等。

## 1.1. SmartCMP主要功能模块概述

**仪表盘**

>用户可在仪表盘查看： 
- 云资源分布、云主机总览、云主机操作系统分布、有告警的云主机、正在进行的操作、
- 即将到期的服务部署、即将卸载的服务部署、
- CPU/内存/磁盘使用率最高的云主机-Top10、CPU/内存/磁盘使用率最低的云主机-Top10

**服务目录**
>用户可以通过服务目录管理以自服务的方式请求该用户可以使用的服务

**服务请求**	
- 我的请求：用户服务请求的信息列表
- 待审批：用户等待审批的服务请求列表
- 已审批：用户已经审批完成的服务请求列表
- 待处理：等待用户处理的服务请求
- 已处理：用户处理完成的服务请求

**我的部署**	
- 服务部署：用户请求目录之后，系统会生成对应蓝图的云主机，即将蓝图对应的应用部署出来。用户可以在服务部署中进行各种运维操作
- 云主机：管理云主机，云主机的三种来源：通过服务目录申请和、导式申请部署的云主机和同步导入进来的云主机。支持用户监控云主机状态，相关物理主机的信息，进行Day2的运维操作直接管理应用或云主机
- 云资源：展现用户申请成功的各种资源，如存储资源、容器服务、网络资源、PaaS资源、软件资源
- 资源状态图：显示云主机和容器的健康状态
- 回收站：所有的服务手工卸除或者到期后自动卸除后，将放置到回收站中进行保留。支持从回收站中进行还原，手工删除（删除后所有资源从云平台中真正删除），或为回收站设置保留时间，到期自动删除（支持设置回收站保留时间为0天，即服务不在回收站中保留）

**监控告警**
>用户订阅云主机的报警，并定义对报警的响应行为：

- 告警策略：定义所选的对象类型（如云主机/应用/容器等）触发警报的条件
- 告警：定义所选告警策略应用到的范围以及触发的通知和操作
- 已触发警报：显示已触发警报列表

**资源分析**	
>提供各类资源使用的分析报表：
- 报表：计费报表、云平台总体情况报表以及其他自定义报表

# 2. 快速上手
**此章内容帮助您快速上手服务申请操作和自助运维操作。**
- 申请服务操作：在「服务目录」模块进行服务申请，您可以使用向导式申请功能，直接开始向导式部署
- 自助运维：在「我的部署」菜单栏中查看服务部署、云主机或云资源的详细信息，并进行自助运维操作

**接下来的章节将介绍如何申请服务操作。**

## 2.1. 登陆系统
浏览器输入SmartCMP的IP地址，例如：http://smartcmp.cloudchef.io，输入用户名和密码。

## 2.2. 申请服务
服务发布成功后，可在服务目录界面查看并申请已发布的服务。

1. 点击左侧导航栏的一级菜单「服务目录」，选择vSphere单节点服务，点击进入服务申请界面
2. 在该页面左侧查看该服务的详情信息，如：基本信息，服务拓扑，组件配置和流程控制等
3. 在右侧填写/修改相关信息，若无直接进入下一步
4. 点击申请，根据该业务组的流程控制（审批模板）获得批准后申请成功。如果业务组无审批流程，申请后直接进入服务部署

## 2.3. 自助运维
服务申请后，可在「我的部署」-「服务部署」查看该部署的进行状态。
+ 若有审批流程，点击「服务请求」-「待审批」查看待审批的服务列表，点击服务部署申请编号，将进入蓝图部署的审批详情页面，可查看当前审批流程走向
+ 若无审批流程，可点击服务部署名称进入部署详情页面，可查看该部署的基本信息，服务部署拓扑，以及操作历史

服务已开始部署，可在操作历史中查看当前部署进程。
1. 在「我的部署」-「服务部署」-「操作历史」标签页中，选中操作，可在下方查看当前部署进程
2. 或点击平台右上角的操作历史图标 ，点击刚刚申请的操作，进入操作历史详情页面；
3. 或者点击「查看全部」，进入操作历史列表界面，点击刚刚申请的服务的「操作名称」，进入操作历史详情页面，查看操作进程

### 2.3.1. 查看服务部署详情和自助运维
服务成功部署后，可在「服务部署」页面查看该服务部署的详细信息以及云主机、应用组件的监控信息。一个服务部署包含一台或多台云主机。
1. 在左侧菜单选择「我的部署」-「服务部署」后，您将会看到服务部署列表，可在「高级搜索」中根据业务组、阶段（运行、操作进行中、关闭、操作失败、已取消、部署审批中 ）、状态（正常、异常）、所有者、项目进行筛选，也可直接进行搜索操作
2. 在服务部署列表中，您可以选中一个或者多个服务部署快速进行一些运维操作，包括「停止服务部署」「安装软件」「复制服务部署」「延长过期时间」「卸除服务部署」「删除管理信息」「更改所有者」「更改项目」「更改业务组」和「伸缩」（示例为vSphere服务部署，不同云平台的运维操作有差异）
3. 点击服务部署名称，可查看该服务部署的详细信息。服务部署详情信息界面包括「基本信息」「服务部署拓扑」「操作历史」和「监控」（对云主机和应用组件的监控）
+ 「基本信息」：包括服务部署的名称、业务组、项目、蓝图、资源池、云平台，以及费用、状态、时间等相关信息。还包括该服务部署的输入参数列表以及输出结果信息。服务部署失败后，某些场景可线下修复，修复成功后支持更改服务部署状态，将“操作失败”更改为“运行”
+	「服务部署拓扑」：包括服务部署的蓝图、详情和流程信息。鼠标悬停至服务拓扑图中，将显示该节点的关键信息，如Server节点将显示云主机名称、客户操作系统、IP地址、内存、磁盘总空间、vCPU数量、CPU使用率、内存使用率等
+	「操作历史」：显示该服务部署的操作历史记录
+	「监控」：显示对该部署中的云主机和组件应用的监控信息

### 2.3.2. 查看云主机详情和自助运维
同时，可在「云主机」中查看云主机状态和详情来对其进行管理和操作，操作的启用和是否需要审批需要在业务组级别或者服务配置级别进行设置。
1.	在左侧菜单选择「我的部署」-「云主机」，您将会看到云主机的列表，在列表右上角「高级搜索」中可以根据业务组、状态（已启动、遗失、已停止）、所有者、项目、标签进行筛选。点击「展示列」，可以勾选或者不选某些列进行展示
2.	在云主机列表中，您可以选中一个或者多个云主机快速进行一些操作，包括「启动」「重新启动」「挂起」「停止」「执行脚本」「设置标签」「启用/切换监控」「更新监控代理」「更新自动化代理」等
3.	您也可以单击某一个云主机进入其详情界面进行管理和操作，包括「基本信息」「操作历史」「快照信息」「监控」「应用列表」标签页和顶部的运维操作列表

4. 「基本信息」包括：
+	虚拟机及其相关主机的基本信息，如：名称、操作系统、已装软件、vCPU、内存、状态、SSH端口、自动化代理、监控方式、监控端口租用/保留到期时间等
+	关系：服务器信息、资源池、数据存储、虚拟机存储策略以及网络标签等
+	物理主机信息、	用户和组
+ 组织信息：服务部署名称、服务名称、业务组、租户、项目等
+	运行状态、	IP地址、键值标签

5.	「操作历史」包括了该虚拟机进行过的操作历史记录
6.	「快照信息」显示当前的快照信息（快照名称、创建时间等），可对快照进行「刷新」「添加」「恢复」和「删除」操作
7.	「监控」包括了该虚拟机CPU、内存、磁盘、网络的监控数据（可以按照需要调整时间跨度或者平均时间来查看历史监控数据）

8.	「应用列表」显示当前虚机已安装的应用列表（若该虚机未安装应用，则不显示应用列表菜单）

9.	「运维操作列表」包括了该虚拟机可执行的操作列表，具体操作介绍会在下文展开

### 2.3.3. 查看云资源详情
支持用户在「云资源」查看相关云资源状态和详情来对其进行管理和操作。

在左侧菜单选择「我的部署」-「云资源」，您将会看到列表左侧有以下几个类别：存储资源、容器服务、网络资源、PaaS资源、软件资源。
+ 「存储资源」:云硬盘、对象存储
+	「容器服务」：部署、守护进程集、有状态副本集、容器、服务、路由、存储卷、配置字典、保密字典
+	「网络资源」：负载均衡器、负载均衡监听器、负载均衡成员池、负载均衡SNAT池、浮动IP、防火墙、安全组、域名系统DNS
+	「PaaS资源」：关系型数据库、Web应用
+	「软件资源」：软件

### 2.3.4. 资源状态图
资源状态图能够显示云主机、容器的健康状态，根据性能指标的状态显示不同的颜色。若该云主机或容器未配置监控，默认显示灰色。
1. 支持用户将鼠标移至该云主机上，将显示该云主机名称
2. 支持用户点击服务部署名称后显示对应云主机详情：
+ 基本信息：IP地址、操作系统、vCPU数量、内存、磁盘总空间
+	组织信息：业务组、项目、所有者
+	性能监控指标：内存使用率、CPU使用率、磁盘使用率

> 还支持用户根据需求对展示内容进行筛选，如全部或已安装监控或未安装监控、按云平台筛选、业务组筛选、项目筛选、标签筛选等。
### 2.3.5. 资源回收
>回收站功能，优化资源回收流程
当用户存在误删除的情况时，支持找回资源与数据。具体步骤：
1.	在左侧菜单选择「我的部署」-「回收站」在回收站列表页面再对该服务部署进行手工「删除」操作，该资源阶段状态显示为已删除，该服务部署信息在回收站列表页面默认保留一天，到期之后服务部署信息永久删除 ，资源也从云平台永久释放回收。
2.	回收站列表页面的服务进行还原，点击「还原」则可以还原资源。

# 3. 首页
用户登录后，左侧是各级菜单，代表不同的功能模块列表。

1. 点击最上面的<箭头可以把左侧菜单收起，收起后点击>箭头，可以展开菜单。
2. 右侧是功能具体展示和操作区域。右侧区域右上角为快速查找信息功能区，可以直接点击按钮查看相应信息 ，从左至右分别是「通知」「操作历史」「关于」。

## 3.1. 导航栏
左侧导航栏详情：
+	仪表盘：概览
+	服务目录
+	服务请求：我的请求、待审批、已审批、待处理、已处理
+	我的部署：服务部署、云主机、云资源、资源状态图、回收站
+	监控告警：告警策略、告警、已触发警报
+	资源分析：报表
## 3.2. 通知
1. 点击右上角的「通知」 ，可查看当前未读消息列表，通知包括消息（如等待审批）、告警通知等，可标记列表中的通知为已读，将不再提示。点击列表中的某条通知将进入该通知详情页面。
2. 点击列表下的「查看所有通知」，可进入所有通知列表。「高级搜索」可通过通知创建的起止时间进行快速搜索定位，也可普通查询搜索。可单个或批量删除通知。
## 3.3. 操作历史
1. 点击右上角的「操作历史」 ，该列表显示当前正在进行的操作，显示该操作的名称、服务名称，请求用户以及创建时间。
2. 可点击某条操作信息进入操作历史详情页面。也可点击「查看全部」进入操作历史列表界面。
3. 点击某条操作，列表下方显示该操作历史详情信息。可通过「高级搜索」根据业务组、请求用户、起止时间、状态进行快速筛选搜查，也可采用普通搜索。
## 3.4. 仪表盘
用户查看仪表盘的详情：
+	云资源分布、云主机总览、云主机操作系统分布、有告警的云主机
+	正在进行的操作、即将到期的服务部署、即将卸载的服务部署
+	CPU/内存/磁盘使用率最高的云主机-Top10
+	CPU/内存/磁盘使用率最低的云主机-Top10

# 4. 服务申请
用户可在服务目录选择向导式申请，或选择已发布的服务进行服务申请。
### 4.0.1. 向导式申请 
您可以通过以下步骤启用向导式申请：
1. 点击左侧导航栏「组织架构」-「业务组」，编辑业务组，在「概况」页面勾选「启用向导式申请」
2. 点击左侧导航栏「服务目录」，服务目录页出现向导式申请卡片
#### 4.0.1.1. vSphere向导式申请
1. 进入「服务目录」，在向导式申请卡片上点击「申请」，填写向导式申请基本信息，点击「下一步」

**需要填写的基本信息**

___
 页面提示|	|说明
:---  | :--- | :---
业务组|	|部署所属业务组
服务部署名称|	|部署名称（若业务组已设定服务部署命名规则，服务部署名称将按照规则自动生成，无需填写）
项目|	|部署所属项目
所有者|	|部署所有者
服务部署原因|	|部署原因
服务部署租用时间（日）|	|租用时间，租用时间到后，部署里的所有云主机会停机并归档
服务部署保留时间（日）|	|保留时间，保留时间到后，部署会被删除
___
2. 「资源配置」页面，点击「添加」
+ 云平台管理：云平台类型选择vSphere，点击「下一步」
+ 	服务器配置页面，填写完成后，点击「下一步」：
+	计算资源页面：填写蓝图节点名称、vCPU数量、内存和云主机数量；
+	系统设置：选择操作系统（Linux、Windows）
+	模板配置：选择操作系统名称和虚拟机模板
+	存储相关：选择文件夹，虚机会部署在选中的vCenter文件夹里

3.	「网络标签」页面，填写以下信息，完成后，点击「下一步」：
+	基本信息：填写访问域和DNS服务器（选填）
+	配置网络：点击「添加」，输入蓝图节点名称（Network），选择网络标签和IP分配方式。配置IP分配方式有3种IP地址分配方式，分别是DHCP、IP池和手工指定
4.	「存储」页面，填写完成后，点击「提交」：
+ 添加存储，点击 ，输入挂载点和大小。选择安装代理会自动挂载磁盘，留空会自动选择一个挂载点或盘符
5. 	点击「下一步」，进入「应用配置」页面，若需添加应用，点击「添加」并勾选相关应用，点击「提交」

6.	点击「下一步」进入「申请」页，该页显示该向导式申请的基本信息，确认无误后点击「提交」，等待部署完成
### 4.0.2. 服务目录申请
用户可在服务目录申请业务组发布的已配置好的服务或共享服务。
1. 在左侧导航栏点击「服务目录」，选择某一服务，点击将进入服务申请页面
2. 	服务申请页面左侧显示该服务的详细信息：

**服务详情页面需要填写的信息**
___
页面提示|	|说明
:---   | :--- | :----
描述|	|该服务的描述信息
基本信息|	|服务配置/业务组配置的服务租用时间、保留时间
服务拓扑|	|服务所用的拓扑图
组件配置|	|服务拓扑图中的所有组件，展开后可查看各个组件的配置信息
流程控制|	|服务配置/业务组上设置的部署/卸除前/后序操作，及是否需要审批以及邮件通知
___
3. 服务申请页面右侧填写相关申请参数：

**服务申请需要填写的信息**
___
页面提示|	|说明
:--------| :-----  | :---- 
业务组|	| 选择业务组与服务的关联关系
项目|	|若该业务组下划分了项目，则可以选择项目
所有者|	|选择该服务的所有者，所有者需为业务组成员
名称|	|若业务组已配置 “服务部署名命名规则”，则服务部署名无需填写，
数量|	|填写部署的数量，默认为1
执行时间|	|可指定时间开始服务部署，精确到分钟
备注信息|	|选填


4.	填写完成后点击「申请」，将根据业务组流程控制直接部署或等待审批，可至「我的部署」-「服务部署」中查看部署情况（也可在右上角「操作历史」 中查看部署情况），或至「服务审批」-「我的申请」中查看审批流程

### 4.0.3. 重新申请部署
**若服务已经部署完成**，可在「我的部署」-「服务部署」页面，通过「重新申请部署」操作，重新申请部署一个一样的服务，原服务的可修改参数也将保留，可修改。

**若原服务有审批，将走审批流程。**

## 4.1. 工单服务场景
工单申请是用户提交服务请求的方法，工单服务申请提供对非标准化资源申请（例如：卸除某项服务部署的服务请求）和需要IT人工介入的服务申请（例如：用户登陆密码重置的服务请求）。
 
具体的工单服务功能描述：
>工单申请：支持用户在服务目录进行工单服务的申请。
>	工单跟踪：用户在服务目录申请工单完成后，支持用户进入我的请求去查看服务详情。

**下文会向您介绍服务申请和跟踪的详细步骤。**
## 4.2. 工单的申请
用户可在服务目录申请已配置好的服务或共享服务。
1.	在左侧导航栏点击「服务目录」，选择手工工单服务，点击将进入服务申请页面
2.	服务申请页面左侧填写该服务的详细信息：标题、工单描述、优先级、紧急程度、申请者、邮箱、手机号。
3.	点击申请，工单服务申请成功。
